# 依赖收集

响应式对象getter相关的逻辑，就是做依赖收集

* Dep-》整个getter的核心

  对Watcher的一种管理，同一时间只能有一个全局的Watcher被计算

* Watcher
  * 是一个Class，定义了一些和Dep相关的属性，还定义了一些原型的方法，和依赖收集相关的有get、addDep和cleanupDeps方法
  * 在添加deps的订阅过程，可以通过id去重避免重复订阅，在每次添加完新的订阅，会移除旧的订阅

收集依赖就是，订阅数据变化的watcher的收集。目的是为了当这些响应式数据发生变化，触发它们的setter的时候，能知道应该通知哪些订阅者，去做相应的逻辑处理，这个过程叫做派发更新

Watcher和Dep就是一个非常经典的观察者设计模式的实现