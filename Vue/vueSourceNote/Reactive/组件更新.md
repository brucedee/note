# 组件更新

过程的核心就是新旧vnode diff，对新旧节点相同以及不同的情况，分别作不同的处理

* 新旧节点不同-》替换已存在的节点

  * 更新流程

    * 创建新节点

      以当前节点为参考节点，创建新的节点，并插入到DOM中

    * 更新父的占位符节点

    * 删除旧节点

      遍历待删除的节点作删除

* 相同

  * 更新流程

    去获取它们的children，根据不同的情况做不同的更新逻辑。最复杂的情况是，它们都存在子节点的，那么会执行updateChildren

  * 调用patchVnode方法

    * 执行prepatch钩子函数

    * 执行update钩子函数

    * 完成patch过程

    * 执行postpatch钩子函数